(this["webpackJsonpionic-react"]=this["webpackJsonpionic-react"]||[]).push([[7],{25:function(e,n,t){"use strict";var r=t(0),o=t.n(r).a.createContext({memories:[],addMemory:function(){},initContext:function(){}});n.a=o},64:function(e,n,t){e.exports=t(91)},69:function(e,n,t){var r={"./pwa-action-sheet.entry.js":[95,94],"./pwa-camera-modal-instance.entry.js":[96,95],"./pwa-camera-modal.entry.js":[97,96],"./pwa-camera.entry.js":[98,97],"./pwa-toast.entry.js":[99,98]};function o(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],o=n[0];return t.e(n[1]).then((function(){return t(o)}))}o.keys=function(){return Object.keys(r)},o.id=69,e.exports=o},71:function(e,n,t){var r={"./ion-action-sheet-ios.entry.js":[103,28],"./ion-action-sheet-md.entry.js":[104,29],"./ion-alert-ios.entry.js":[105,30],"./ion-alert-md.entry.js":[106,31],"./ion-app_8-ios.entry.js":[107,12],"./ion-app_8-md.entry.js":[108,13],"./ion-avatar_3-ios.entry.js":[109,32],"./ion-avatar_3-md.entry.js":[110,33],"./ion-back-button-ios.entry.js":[111,34],"./ion-back-button-md.entry.js":[112,35],"./ion-backdrop-ios.entry.js":[113,80],"./ion-backdrop-md.entry.js":[114,81],"./ion-button_2-ios.entry.js":[115,36],"./ion-button_2-md.entry.js":[116,37],"./ion-card_5-ios.entry.js":[117,38],"./ion-card_5-md.entry.js":[118,39],"./ion-checkbox-ios.entry.js":[119,40],"./ion-checkbox-md.entry.js":[120,41],"./ion-chip-ios.entry.js":[121,42],"./ion-chip-md.entry.js":[122,43],"./ion-col_3.entry.js":[123,82],"./ion-datetime_3-ios.entry.js":[124,18],"./ion-datetime_3-md.entry.js":[125,19],"./ion-fab_3-ios.entry.js":[126,44],"./ion-fab_3-md.entry.js":[127,45],"./ion-img.entry.js":[128,83],"./ion-infinite-scroll_2-ios.entry.js":[129,84],"./ion-infinite-scroll_2-md.entry.js":[130,85],"./ion-input-ios.entry.js":[131,46],"./ion-input-md.entry.js":[132,47],"./ion-item-option_3-ios.entry.js":[133,48],"./ion-item-option_3-md.entry.js":[134,49],"./ion-item_8-ios.entry.js":[135,50],"./ion-item_8-md.entry.js":[136,51],"./ion-loading-ios.entry.js":[137,52],"./ion-loading-md.entry.js":[138,53],"./ion-menu_3-ios.entry.js":[139,54],"./ion-menu_3-md.entry.js":[140,55],"./ion-modal-ios.entry.js":[141,14],"./ion-modal-md.entry.js":[142,15],"./ion-nav_2.entry.js":[143,24],"./ion-popover-ios.entry.js":[144,16],"./ion-popover-md.entry.js":[145,17],"./ion-progress-bar-ios.entry.js":[146,56],"./ion-progress-bar-md.entry.js":[147,57],"./ion-radio_2-ios.entry.js":[148,58],"./ion-radio_2-md.entry.js":[149,59],"./ion-range-ios.entry.js":[150,60],"./ion-range-md.entry.js":[151,61],"./ion-refresher_2-ios.entry.js":[152,62],"./ion-refresher_2-md.entry.js":[153,63],"./ion-reorder_2-ios.entry.js":[154,26],"./ion-reorder_2-md.entry.js":[155,27],"./ion-ripple-effect.entry.js":[156,86],"./ion-route_4.entry.js":[157,64],"./ion-searchbar-ios.entry.js":[158,65],"./ion-searchbar-md.entry.js":[159,66],"./ion-segment_2-ios.entry.js":[160,67],"./ion-segment_2-md.entry.js":[161,68],"./ion-select_3-ios.entry.js":[162,69],"./ion-select_3-md.entry.js":[163,70],"./ion-slide_2-ios.entry.js":[164,87],"./ion-slide_2-md.entry.js":[165,88],"./ion-spinner.entry.js":[166,22],"./ion-split-pane-ios.entry.js":[167,89],"./ion-split-pane-md.entry.js":[168,90],"./ion-tab-bar_2-ios.entry.js":[169,71],"./ion-tab-bar_2-md.entry.js":[170,72],"./ion-tab_2.entry.js":[171,25],"./ion-text.entry.js":[172,73],"./ion-textarea-ios.entry.js":[173,74],"./ion-textarea-md.entry.js":[174,75],"./ion-toast-ios.entry.js":[175,76],"./ion-toast-md.entry.js":[176,77],"./ion-toggle-ios.entry.js":[177,20],"./ion-toggle-md.entry.js":[178,21],"./ion-virtual-scroll.entry.js":[179,91]};function o(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],o=n[0];return t.e(n[1]).then((function(){return t(o)}))}o.keys=function(){return Object.keys(r)},o.id=71,e.exports=o},73:function(e,n,t){var r={"./ion-icon.entry.js":[183,102]};function o(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],o=n[0];return t.e(n[1]).then((function(){return t(o)}))}o.keys=function(){return Object.keys(r)},o.id=73,e.exports=o},78:function(e,n,t){},89:function(e,n,t){},90:function(e,n,t){},91:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),i=t(32),a=t.n(i),s=t(62),c=t(2),l=t(54),m=t(11),u=t(25),d=(t(78),function(e){return o.a.createElement(c.f,{className:"memory-item"},o.a.createElement("img",{src:e.image,alt:e.title}),o.a.createElement(c.g,null,o.a.createElement(c.h,null,e.title)))}),y=function(e){return o.a.createElement(o.a.Fragment,null,e.items.map((function(e){return o.a.createElement(c.v,{key:e.id},o.a.createElement(c.i,null,o.a.createElement(d,{image:e.base64Url,title:e.title})))})))},j=t(13),f=function(e){return o.a.createElement(c.t,null,o.a.createElement(c.n,null,o.a.createElement(c.D,null,o.a.createElement(c.C,null,e.title),Object(c.G)("ios")&&o.a.createElement(c.e,{slot:"end"},o.a.createElement(c.d,{routerLink:"/new-memory"},o.a.createElement(c.o,{icon:j.a,slot:"icon-only"}))))),o.a.createElement(c.j,null,o.a.createElement(c.m,null,0===e.memories.length&&o.a.createElement(c.v,null,o.a.createElement(c.i,{className:"ion-text-center"},o.a.createElement("h2",null,e.fallbackText))),o.a.createElement(y,{items:e.memories})),!Object(c.G)("ios")&&o.a.createElement(c.k,{vertical:"bottom",horizontal:"end",slot:"fixed"},o.a.createElement(c.l,{routerLink:"/new-memory"},o.a.createElement(c.o,{icon:j.a})))))},p=function(){var e=Object(r.useContext)(u.a).memories.filter((function(e){return"good"===e.type}));return o.a.createElement(f,{title:"Good Memories",fallbackText:"No good memories found!",memories:e})},b=(t(79),t(80),t(81),t(82),t(83),t(84),t(85),t(86),t(87),t(88),t(89),t(90),function(){var e=Object(r.useContext)(u.a).memories.filter((function(e){return"bad"===e.type}));return o.a.createElement(f,{title:"Bad Memories",fallbackText:"No bad memories found!",memories:e})}),h=o.a.lazy((function(){return t.e(11).then(t.bind(null,201))})),v=function(){var e=Object(r.useContext)(u.a).initContext;return Object(r.useEffect)((function(){e()}),[e]),o.a.createElement(c.b,null,o.a.createElement(l.a,null,o.a.createElement(o.a.Suspense,{fallback:o.a.createElement(c.y,null)},o.a.createElement(c.B,null,o.a.createElement(c.u,null,o.a.createElement(m.c,{path:"/good-memories"},o.a.createElement(p,null)),o.a.createElement(m.c,{path:"/bad-memories"},o.a.createElement(b,null)),o.a.createElement(m.c,{path:"/new-memory"},o.a.createElement(h,null)),o.a.createElement(m.b,{to:"/good-memories"})),o.a.createElement(c.z,{slot:"bottom"},o.a.createElement(c.A,{href:"/good-memories",tab:"good"},o.a.createElement(c.o,{icon:j.j}),o.a.createElement(c.r,null,"Good Memories")),o.a.createElement(c.A,{href:"/bad-memories",tab:"bad"},o.a.createElement(c.o,{icon:j.o}),o.a.createElement(c.r,null,"Bad Memories")))))))},g=t(57),E=t(4),w=t.n(E),_=t(60),k=t(12),O=t(49),x=t(21),C=t(59),N=x.e.Storage,P=x.e.Filesystem,U=function(e){var n=Object(r.useState)([]),t=Object(O.a)(n,2),i=t[0],a=t[1];Object(r.useEffect)((function(){var e=i.map((function(e){return{id:e.id,title:e.title,imagePath:e.imagePath,type:e.type}}));N.set({key:"memories",value:JSON.stringify(e)})}),[i]);var s=function(){var e=Object(k.a)(w.a.mark((function e(n,t,r){var o,i,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(new Date).getTime()+".jpeg",e.next=3,Object(C.a)(n.preview);case 3:i=e.sent,P.writeFile({path:o,data:i,directory:x.d.Data}),s={id:Math.random().toString(),title:t,type:r,imagePath:o,base64Url:i},a((function(e){return[].concat(Object(_.a)(e),[s])}));case 7:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),c=Object(r.useCallback)(Object(k.a)(w.a.mark((function e(){var n,t,r,o,i,s,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get({key:"memories"});case 2:n=e.sent,t=n.value?JSON.parse(n.value):[],r=[],o=Object(g.a)(t),e.prev=6,o.s();case 8:if((i=o.n()).done){e.next=16;break}return s=i.value,e.next=12,P.readFile({path:s.imagePath,directory:x.d.Data});case 12:c=e.sent,r.push({id:s.id,title:s.title,type:s.type,imagePath:s.imagePath,base64Url:"data:image/jpeg;base64,"+c.data});case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),o.e(e.t0);case 21:return e.prev=21,o.f(),e.finish(21);case 24:a(r);case 25:case"end":return e.stop()}}),e,null,[[6,18,21,24]])}))),[]);return o.a.createElement(u.a.Provider,{value:{memories:i,addMemory:s,initContext:c}},e.children)},D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(o.a.createElement(U,null,o.a.createElement(v,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");D?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):M(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):M(n,e)}))}}(),Object(s.a)(window)}},[[64,9,10]]]);
//# sourceMappingURL=main.59285bd6.chunk.js.map